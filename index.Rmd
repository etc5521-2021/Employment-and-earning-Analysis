---
title: "ETC5521 Assignment 1"
subtitle: "Employment and Earnings"
team: Cassowary
author:
  - Kexin Xu
  - Lintian Zhang
date: "`r Sys.Date()`"
output: 
  html_document
---

[This assignment is for ETC5521 Assignment 1 by Team `r rmarkdown::metadata$team` comprising of `r knitr::combine_words(rmarkdown::metadata$author)`.]{style="color:#006DAE;"}


```{r}
library(tidyr)
library(tibble)
library(dplyr)
library(ggplot2)
```


```{r}
employed <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-02-23/employed.csv')

earn <- readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2021/2021-02-23/earn.csv')
```



# Introduction and motivation

[FILL] Give the bigger picture of the data, and inspire the reader to learn more about the problem by reading your analysis. 

# Data description

A data description should tell the reader the source of the data, and detail the structure of the data, including variables and their types, time frame of collection, collection methods.

# Data description

The datasets come from [BLS](https://www.bls.gov/cps/tables.htm#charemp_m), specifically table *cpsaat17* across several years.
The **employed** dataset tells about employed persons by industry, sex, race, and occupation through 2015 to 2020.
```{r}
tribble(
  ~Variable, ~Type,
  "industry", "character",
  "major_occupation", "character",
  "minor_occupation", "character",
  "race_gender", "character",
  "industry_total", "double",
  "employ_n", "double",
  "year", "integer"
)
```

The **earn** dadtaset tells about weekly median earnings and number of persons employed by race/gender/age group through 2010 to 2020.
```{r}
tribble(
  ~Variable, ~Type,
  "sex", "character",
  "race", "character",
  "ethnic_origin", "character",
  "age", "character",
  "year", "integer",
  "quarter", "integer",
  "n_persons", "double",
  "median_weekly_income", "integer"
)
```
The datasets are collected from the Current Population Survey (CPS) which is a monthly survey of households conducted by the Bureau of Census for the Bureau of Labor Statistics.

Based on the datasets, three questions are going to be explored and analyzed in the following section, including:

- what are the changes of people employed in different industries from 2015 to 2020?
 
- what are the demographic differences between industries from 2015 to 2020?

- how do different factors affect the income between 2010 and 2020?


# Analysis and findings

### What are the changes of people employed in different industries from 2015 to 2020?

```{r}
industry <- employed %>%
  filter(race_gender == 'TOTAL',
         !is.na(industry),
         !is.na(industry_total)) %>%
  select(industry, industry_total,year) %>%
  rename(no_of_people_employed = `industry_total`) %>%
  group_by(year) %>%
  unique()
  
```


```{r fig.height=65, fig.width=25}
emp <- industry %>%
  ggplot(aes(x = year, y =no_of_people_employed, color = industry)) +
  geom_line(alpha = 75) +
  facet_grid(industry ~ ., scales = "free_y") +
 # scale_x_date(date_breaks = "1 month", 
               #date_labels = "%b %y") +
  labs(
    title = "The changes of total number of people employed in each industries from 2015 to 2020",
    color = "industry",
    x = "",
    y = "The number of people employed"
  ) +
  theme_bw() +
  theme(
    #legend.position = "top",
    #plot.margin = margin(20,10,10,10),
    plot.title = element_text(hjust = "0.5", size = 30)
  )
emp
```

or:

```{r}
employed_in_each_industry <- industry %>%
  ggplot(aes(x=year, y =no_of_people_employed, color=industry)) +
  geom_line()
employed_in_each_industry
```

### What are the demographic differences between industries from 2015 to 2020?



### How do different factors affect the income between 2010 and 2020?





# References

### Data source

Labor Force Statistics from the Current Population Survey. (2021). Retrieved 15 August 2021, from https://www.bls.gov/cps/tables.htm#charemp_m

### Software

R Core Team (2020). R: A language and environment for statistical computing. R
  Foundation for Statistical Computing, Vienna, Austria. URL
  https://www.R-project.org/.


### Packages

Wickham et al., (2019). Welcome to the tidyverse. Journal of Open Source Software, 4(43), 1686,
  https://doi.org/10.21105/joss.01686
  
#(confirm aigain with the APA 6th style)!!!!!!!!!!!!!!!!!!!!!!!!!!!#


Hadley Wickham, Romain François, Lionel Henry and Kirill Müller (2021). dplyr: A Grammar of Data Manipulation.
  R package version 1.0.5. https://CRAN.R-project.org/package=dplyr

Hadley Wickham (2021). tidyr: Tidy Messy Data. R package version 1.1.3.
  https://CRAN.R-project.org/package=tidyr
  
Wilke, C.O. (2020). ggtext: Improved Text Rendering Support for 'ggplot2'.
  R package version 0.1.1. https://CRAN.R-project.org/package=ggtext

JJ Allaire and Yihui Xie and Jonathan McPherson and Javier Luraschi and Kevin Ushey and Aron Atkins and Hadley
  Wickham and Joe Cheng and Winston Chang and Richard Iannone (2021). rmarkdown: Dynamic Documents for R. R
  package version 2.10. URL https://rmarkdown.rstudio.com.

Yihui Xie and J.J. Allaire and Garrett Grolemund (2018). R Markdown: The Definitive Guide. Chapman and
  Hall/CRC. ISBN 9781138359338. URL https://bookdown.org/yihui/rmarkdown.

Yihui Xie and Christophe Dervieux and Emily Riederer (2020). R Markdown Cookbook. Chapman and Hall/CRC. ISBN
  9780367563837. URL https://bookdown.org/yihui/rmarkdown-cookbook.

Kirill Müller and Hadley Wickham (2021). tibble: Simple Data Frames. R package version 3.1.3.
  https://CRAN.R-project.org/package=tibble
